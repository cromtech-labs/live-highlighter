<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shadow DOM Test - Live Highlighter</title>
    <style>
      body {
        font-family: "Segoe UI", Roboto, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 20px;
        background: #f5f5f5;
      }
      .header {
        background: white;
        padding: 30px;
        border-radius: 8px;
        margin-bottom: 30px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #1a73e8;
        margin: 0 0 10px;
      }
      .test-section {
        background: white;
        padding: 30px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      h2 {
        color: #202124;
        margin-top: 0;
      }
      .component {
        margin: 20px 0;
        padding: 15px;
        border: 2px dashed #dadce0;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>Shadow DOM Test</h1>
      <p>
        This page tests Live Highlighter's ability to highlight text inside
        Shadow DOM components.
      </p>
      <p>
        <strong>Test keywords:</strong> error, success, resource, tags, data
      </p>
    </div>

    <div class="test-section">
      <h2>Regular DOM (Control)</h2>
      <p>
        This paragraph contains test words in regular DOM: error, success,
        resource, tags, data.
      </p>
    </div>

    <div class="test-section">
      <h2>Shadow DOM Components</h2>
      <div id="shadow1" class="component"></div>
      <div id="shadow2" class="component"></div>
      <div id="shadow3" class="component"></div>
    </div>

    <div class="test-section">
      <h2>Nested Shadow DOM</h2>
      <div id="nestedShadow" class="component"></div>
    </div>

    <div class="test-section">
      <h2>Dynamic Shadow DOM</h2>
      <button
        id="addShadowBtn"
        style="
          padding: 10px 20px;
          background: #1a73e8;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
        "
      >
        Add Shadow Component
      </button>
      <div id="dynamicContainer"></div>
    </div>

    <script>
      // Create shadow DOM components
      const shadow1 = document
        .getElementById("shadow1")
        .attachShadow({ mode: "open" });
      shadow1.innerHTML = `
      <style>
        :host { display: block; }
        p { color: #202124; margin: 10px 0; }
      </style>
      <h3>Shadow Component #1</h3>
      <p>This text is inside a shadow DOM. Test words: error, success, resource.</p>
      <p>Multiple occurrences: error error error, success success, tags tags.</p>
    `;

      const shadow2 = document
        .getElementById("shadow2")
        .attachShadow({ mode: "open" });
      shadow2.innerHTML = `
      <style>
        :host { display: block; }
        .card { background: #f8f9fa; padding: 15px; border-radius: 4px; }
      </style>
      <h3>Shadow Component #2 (Styled)</h3>
      <div class="card">
        <p>Styled shadow DOM content with error handling and success messages.</p>
        <p>Resource management and data processing with proper tags.</p>
      </div>
    `;

      const shadow3 = document
        .getElementById("shadow3")
        .attachShadow({ mode: "open" });
      shadow3.innerHTML = `
      <style>
        :host { display: block; }
        ul { margin: 10px 0; padding-left: 20px; }
      </style>
      <h3>Shadow Component #3 (List)</h3>
      <ul>
        <li>Error handling in shadow DOM</li>
        <li>Success metrics and resource allocation</li>
        <li>Data processing with tags</li>
        <li>More error and success cases</li>
      </ul>
    `;

      // Nested shadow DOM
      const nestedOuter = document
        .getElementById("nestedShadow")
        .attachShadow({ mode: "open" });
      nestedOuter.innerHTML = `
      <style>
        :host { display: block; }
        .outer { background: #e8f5e9; padding: 15px; border-radius: 4px; }
      </style>
      <div class="outer">
        <h3>Outer Shadow DOM</h3>
        <p>This is the outer shadow with error and success messages.</p>
        <div id="innerHost"></div>
      </div>
    `;

      const nestedInner = nestedOuter
        .querySelector("#innerHost")
        .attachShadow({ mode: "open" });
      nestedInner.innerHTML = `
      <style>
        :host { display: block; margin-top: 10px; }
        .inner { background: #fff3e0; padding: 15px; border-radius: 4px; }
      </style>
      <div class="inner">
        <h4>Inner Shadow DOM (Nested)</h4>
        <p>Nested shadow DOM with resource and data management.</p>
        <p>Testing tags and error handling deep inside.</p>
      </div>
    `;

      // Dynamic shadow components
      let shadowCount = 0;
      document.getElementById("addShadowBtn").addEventListener("click", () => {
        shadowCount++;
        const container = document.getElementById("dynamicContainer");
        const div = document.createElement("div");
        div.className = "component";
        div.style.marginTop = "15px";
        container.appendChild(div);

        const shadow = div.attachShadow({ mode: "open" });
        shadow.innerHTML = `
        <style>
          :host { display: block; }
          .dynamic { background: #f3e5f5; padding: 15px; border-radius: 4px; }
        </style>
        <div class="dynamic">
          <h4>Dynamic Shadow Component #${shadowCount}</h4>
          <p>Dynamically added shadow DOM at ${new Date().toLocaleTimeString()}</p>
          <p>Contains error, success, resource, data, and tags keywords.</p>
        </div>
      `;
      });

      // Add some components on load
      setTimeout(() => {
        document.getElementById("addShadowBtn").click();
      }, 100);
    </script>
  </body>
</html>
